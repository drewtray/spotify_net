---

title: retrieval of public tracks


keywords: fastai
sidebar: home_sidebar

summary: "Pull all tracks and their features for a user's public playlists"
description: "Pull all tracks and their features for a user's public playlists"
nb_path: "retrieve_public.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: retrieve_public.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">config</span>
<span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">boto3</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="cred" class="doc_header"><code>cred</code><a href="https://github.com/drewtray/spotify_net/tree/master/spotify_net/retrieve_public.py#L6" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>cred</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">c_id</span><span class="p">,</span> <span class="n">c_secret</span><span class="p">,</span> <span class="n">access_token</span><span class="p">,</span> <span class="n">refresh_token</span> <span class="o">=</span> <span class="n">cred</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Get user's public playlists:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_items</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

<span class="n">user_id</span> <span class="o">=</span> <span class="s1">&#39;atraylor6&#39;</span>
<span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>

<span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_items</span><span class="p">)</span> <span class="o">%</span> <span class="mi">50</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
    
    <span class="n">play_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://api.spotify.com/v1/users/</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s1">/playlists?limit=50&amp;offset=</span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Bearer </span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="p">}</span>

    <span class="n">r_play</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">play_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    

    <span class="k">if</span> <span class="n">r_play</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span><span class="p">:</span>

        <span class="n">TOKEN_URL</span> <span class="o">=</span> <span class="s1">&#39;https://accounts.spotify.com/api/token&#39;</span>

        <span class="n">message</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">CLIENT_ID</span> <span class="o">+</span> <span class="s1">&#39;:&#39;</span> <span class="o">+</span> <span class="n">config</span><span class="o">.</span><span class="n">CLIENT_SECRET</span>
        <span class="n">messageBytes</span> <span class="o">=</span> <span class="n">message</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
        <span class="n">base64Bytes</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">messageBytes</span><span class="p">)</span>
        <span class="n">base64Message</span> <span class="o">=</span> <span class="n">base64Bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;ascii&#39;</span><span class="p">)</span>
    
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="s1">&#39;Basic &#39;</span> <span class="o">+</span> <span class="n">base64Message</span><span class="p">,</span>
        <span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;application/x-www-form-urlencoded&#39;</span>
        <span class="p">}</span>

        <span class="n">pars_refresh</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;grant_type&#39;</span><span class="p">:</span> <span class="s1">&#39;refresh_token&#39;</span><span class="p">,</span>
            <span class="s1">&#39;refresh_token&#39;</span><span class="p">:</span> <span class="n">refresh_token</span><span class="p">,</span>
            <span class="s1">&#39;redirect_uri&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8888/callback&#39;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="n">r_refresh</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">TOKEN_URL</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="n">pars_refresh</span><span class="p">)</span>
        <span class="n">access_token</span> <span class="o">=</span> <span class="n">r_refresh</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;access_token&#39;</span><span class="p">]</span>

        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Bearer </span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s1">&#39;</span>
                    <span class="p">}</span>

        <span class="n">r_play</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">play_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        
    <span class="n">r_play</span> <span class="o">=</span> <span class="n">r_play</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
    <span class="c1"># print(r_play[&#39;items&#39;][0])</span>
    <span class="n">df_items</span> <span class="o">=</span> <span class="n">df_items</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">r_play</span><span class="p">[</span><span class="s1">&#39;items&#39;</span><span class="p">],</span> <span class="n">ignore_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="c1"># print(df_items.head())</span>
    <span class="n">offset</span> <span class="o">+=</span> <span class="mi">50</span>

<span class="n">df_pub</span> <span class="o">=</span> <span class="n">df_items</span><span class="p">[</span><span class="n">df_items</span><span class="p">[</span><span class="s1">&#39;public&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="kc">True</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Get track and artist names/ids for each track in public playlists:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_list</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">p_id</span> <span class="ow">in</span> <span class="n">df_pub</span><span class="p">[</span><span class="s1">&#39;id&#39;</span><span class="p">]:</span>

    <span class="n">df_tracks</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">()</span>

    <span class="n">offset</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">df_tracks</span><span class="p">)</span> <span class="o">%</span> <span class="mi">100</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        
        <span class="n">track_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://api.spotify.com/v1/playlists/</span><span class="si">{</span><span class="n">p_id</span><span class="si">}</span><span class="s1">/tracks?limit=100&amp;offset=</span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;Authorization&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Bearer </span><span class="si">{</span><span class="n">access_token</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">}</span>

        <span class="n">r_track</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">track_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>

        <span class="n">track_ids</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;track&#39;</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">r_track</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span>
        <span class="n">track_names</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;track&#39;</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">r_track</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span>
        <span class="n">track_artists</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;track&#39;</span><span class="p">][</span><span class="s1">&#39;artists&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;name&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">r_track</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span>
        <span class="n">artist_id</span> <span class="o">=</span> <span class="p">[</span><span class="n">t</span><span class="p">[</span><span class="s1">&#39;track&#39;</span><span class="p">][</span><span class="s1">&#39;artists&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;id&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">r_track</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;items&#39;</span><span class="p">]]</span>

        <span class="n">df_t</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="n">track_ids</span><span class="p">,</span>
            <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="n">track_names</span><span class="p">,</span>
            <span class="s1">&#39;artist&#39;</span><span class="p">:</span> <span class="n">track_artists</span><span class="p">,</span>
            <span class="s1">&#39;artist id&#39;</span><span class="p">:</span> <span class="n">artist_id</span><span class="p">,</span>
            <span class="s1">&#39;playlist id&#39;</span><span class="p">:</span> <span class="n">p_id</span>

        <span class="p">})</span>  

        <span class="n">join_ids</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">track_ids</span><span class="p">)</span>
        <span class="n">feat_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://api.spotify.com/v1/audio-features?limit=100&amp;offset=</span><span class="si">{</span><span class="n">offset</span><span class="si">}</span><span class="s1">&amp;ids=</span><span class="si">{</span><span class="n">join_ids</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="n">r_feat</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">feat_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
        <span class="n">feat_frame</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">r_feat</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;audio_features&#39;</span><span class="p">])</span>

        <span class="n">df_t</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">df_t</span><span class="p">,</span> <span class="n">feat_frame</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>

        <span class="n">df_tracks</span> <span class="o">=</span> <span class="n">df_tracks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_t</span><span class="p">)</span>
        <span class="n">offset</span> <span class="o">+=</span> <span class="mi">100</span>

    <span class="n">df_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">df_tracks</span><span class="p">)</span>

<span class="n">df_tracks</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">df_list</span><span class="p">)</span>
<span class="n">df_tracks</span> <span class="o">=</span> <span class="n">df_tracks</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span>
<span class="n">id_map</span> <span class="o">=</span> <span class="n">df_pub</span><span class="p">[[</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">to_dict</span><span class="p">()[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span>
<span class="n">df_tracks</span><span class="p">[</span><span class="s1">&#39;playlist id&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_tracks</span><span class="p">[</span><span class="s1">&#39;playlist id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">id_map</span><span class="p">)</span>
<span class="n">df_tracks</span> <span class="o">=</span> <span class="n">df_tracks</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">df_tracks</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(1145, 22)
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">artist_list</span> <span class="o">=</span> <span class="n">df_tracks</span><span class="p">[</span><span class="s1">&#39;artist id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
<span class="n">genre_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">index</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">temp_list</span> <span class="o">=</span> <span class="n">artist_list</span><span class="p">[</span><span class="n">index</span><span class="p">:</span> <span class="n">index</span><span class="o">+</span><span class="mi">50</span><span class="p">]</span>

<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">artist_list</span><span class="p">)</span><span class="o">/</span><span class="mi">50</span><span class="p">)):</span>
    <span class="n">artist_join</span> <span class="o">=</span> <span class="s1">&#39;,&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">temp_list</span><span class="p">)</span>
    <span class="n">art_url</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;https://api.spotify.com/v1/artists?ids=</span><span class="si">{</span><span class="n">artist_join</span><span class="si">}</span><span class="s1">&#39;</span>
    <span class="n">r_art</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">art_url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    
    <span class="k">try</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span><span class="p">[</span><span class="s1">&#39;genres&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">r_art</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s1">&#39;artists&#39;</span><span class="p">]]</span>
    <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;No Genre&#39;</span><span class="p">]</span>

    <span class="n">genre_list</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
    <span class="n">index</span> <span class="o">+=</span> <span class="mi">50</span>
    <span class="n">temp_list</span> <span class="o">=</span> <span class="n">artist_list</span><span class="p">[</span><span class="n">index</span><span class="p">:</span> <span class="n">index</span><span class="o">+</span><span class="mi">50</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">g_ser</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">Series</span><span class="p">(</span><span class="n">genre_list</span><span class="p">)</span>
<span class="c1"># g_ser.apply(lambda x: len(x)).value_counts()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">trimmed_g</span> <span class="o">=</span> <span class="n">g_ser</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
<span class="c1"># trimmed_g.apply(lambda x: len(x)).value_counts()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_tracks</span><span class="p">[</span><span class="s1">&#39;genre&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">trimmed_g</span>
<span class="c1"># df_tracks.tail()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">genre_bin</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">get_dummies</span><span class="p">(</span><span class="n">df_tracks</span><span class="p">[</span><span class="s1">&#39;genre&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">explode</span><span class="p">())</span>
<span class="n">genre_bin</span> <span class="o">=</span> <span class="n">genre_bin</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_tracks</span> <span class="o">=</span> <span class="n">df_tracks</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;genre&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">df_tracks</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">df_tracks</span><span class="p">,</span> <span class="n">genre_bin</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_tracks</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>id</th>
      <th>name</th>
      <th>artist</th>
      <th>artist id</th>
      <th>playlist id</th>
      <th>danceability</th>
      <th>energy</th>
      <th>key</th>
      <th>loudness</th>
      <th>mode</th>
      <th>...</th>
      <th>underground rap</th>
      <th>vapor pop</th>
      <th>vapor soul</th>
      <th>vapor twitch</th>
      <th>vaporwave</th>
      <th>vienna indie</th>
      <th>viral rap</th>
      <th>vocal house</th>
      <th>wave</th>
      <th>wonky</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0afGLa6wcYiLLXFZ48ZQpY</td>
      <td>Thunder</td>
      <td>Roy Blair</td>
      <td>6Sa4YbwEdGlfVSJMF1Lp67</td>
      <td>søndag</td>
      <td>0.667</td>
      <td>0.316</td>
      <td>0</td>
      <td>-9.132</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>3LH6EfPCeySeuymuK2gWAO</td>
      <td>Bedroom</td>
      <td>Litany</td>
      <td>2z6JjrrJKNLilqlx8mlxcc</td>
      <td>søndag</td>
      <td>0.692</td>
      <td>0.452</td>
      <td>6</td>
      <td>-8.180</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0bonUwkDjTgQ8URsgCcHhH</td>
      <td>Cherry Blossom</td>
      <td>Raury</td>
      <td>2PU4qFehXQF7WnlFsJpBiJ</td>
      <td>søndag</td>
      <td>0.805</td>
      <td>0.176</td>
      <td>7</td>
      <td>-20.783</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>3rxYhGVE6GHQyAy4CdGfq1</td>
      <td>Pink &amp; Blue (RAC Mix)</td>
      <td>Tycho</td>
      <td>5oOhM2DFWab8XhSdQiITry</td>
      <td>søndag</td>
      <td>0.671</td>
      <td>0.721</td>
      <td>5</td>
      <td>-7.378</td>
      <td>1</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>2H7Nwzydg8ZusjdWkYqsHy</td>
      <td>Redstripe Rhapsody</td>
      <td>LAUSSE THE CAT</td>
      <td>2Zv7tySETckaR2robozkcz</td>
      <td>søndag</td>
      <td>0.633</td>
      <td>0.326</td>
      <td>4</td>
      <td>-15.050</td>
      <td>0</td>
      <td>...</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 388 columns</p>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df_tracks</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;features_spot.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

